
const dealerImages = [
    {
        id: 1,
        src: "images/chungnhan/chungnhan1.jpg",
        alt: "Quy trình đào tạo đại lý Bio Amida",
        title: "Đào tạo đại lý mới"
    },
    {
        id: 2,
        src: "images/chungnhan/chungnhancucchinhtri.jpeg",
        alt: "Quy trình đào tạo đại lý Bio Amida",
        title: "Đào tạo đại lý mới"
    },
];

const dealerImages2 = [
    { id: 1, src: "images/khaitruong/kyanh/DAT_5559.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 2, src: "images/khaitruong/kyanh/DAT_5569.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 3, src: "images/khaitruong/kyanh/DAT_5578.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 4, src: "images/khaitruong/kyanh/DAT_5588.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 5, src: "images/khaitruong/kyanh/DAT_5611.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 6, src: "images/khaitruong/kyanh/DAT_5628.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 7, src: "images/khaitruong/kyanh/DAT_5680.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 8, src: "images/khaitruong/kyanh/DAT_5686.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 9, src: "images/khaitruong/kyanh/DAT_5697.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 10, src: "images/khaitruong/kyanh/DAT_5711.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 11, src: "images/khaitruong/kyanh/DAT_5729.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 12, src: "images/khaitruong/kyanh/DAT_5740.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 13, src: "images/khaitruong/kyanh/DAT_5784.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 14, src: "images/khaitruong/kyanh/DAT_5848.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 15, src: "images/khaitruong/kyanh/DAT_5860.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 16, src: "images/khaitruong/kyanh/DAT_5864.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 17, src: "images/khaitruong/kyanh/DAT_5874.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 18, src: "images/khaitruong/kyanh/DAT_5892.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 19, src: "images/khaitruong/kyanh/DAT_5896.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 20, src: "images/khaitruong/kyanh/DAT_5933.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 21, src: "images/khaitruong/kyanh/DAT_5939.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 22, src: "images/khaitruong/kyanh/DAT_5950.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 23, src: "images/khaitruong/kyanh/DAT_5960.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 24, src: "images/khaitruong/kyanh/DAT_6106.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 25, src: "images/khaitruong/kyanh/DAT_6217.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 26, src: "images/khaitruong/kyanh/DAT_6266.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 27, src: "images/khaitruong/kyanh/DAT_6273.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 28, src: "images/khaitruong/kyanh/DAT_6286.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 29, src: "images/khaitruong/kyanh/DAT_6314.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 30, src: "images/khaitruong/kyanh/DAT_6331.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" },
    { id: 31, src: "images/khaitruong/kyanh/DAT_6377.jpg", alt: "Khai trương ở Kỳ Anh", title: "Khai trương ở Kỳ Anh" }
];

// Function tạo gallery item
function createGalleryItem(image) {
    return `
        <div class="gallery-item" data-image-id="${image.id}">
            <img src="${image.src}" 
                 alt="${image.alt}" 
                 title="${image.title}"
                 loading="lazy"
                 onclick="openLightbox(${image.id})">
            <div class="gallery-overlay">
                <h3>${image.title}</h3>
                <p>${image.alt}</p>
                <button class="view-btn" onclick="openLightbox(${image.id})">
                    <i class="fas fa-eye"></i> Xem chi tiết
                </button>
            </div>
        </div>
    `;
}

// Function render gallery
function renderGallery() {
    const galleryGrid = document.getElementById('galleryGrid');
    const galleryGrid2 = document.getElementById('galleryGrid2');
    if (galleryGrid) {
        currentGallery = dealerImages;
        const galleryHTML = dealerImages.map(image => createGalleryItem(image)).join('');
        galleryGrid.innerHTML = galleryHTML;
    }
    else if (galleryGrid2) {
        currentGallery = dealerImages2;
        const galleryHTML2 = dealerImages2.map(image => createGalleryItem(image)).join('');
        galleryGrid2.innerHTML = galleryHTML2;
    }
}

// Lightbox functionality
let currentImageIndex = 0;
let currentGallery = dealerImages; // Mặc định, sẽ gán lại khi render gallery 2

function openLightbox(imageId) {
    const modal = document.getElementById('lightboxModal');
    const lightboxImage = document.getElementById('lightboxImage');
    const lightboxCaption = document.getElementById('lightboxCaption');

    currentImageIndex = currentGallery.findIndex(img => img.id === imageId);
    const image = currentGallery[currentImageIndex];

    lightboxImage.src = image.src;
    lightboxImage.alt = image.alt;
    lightboxCaption.textContent = image.title;

    modal.style.display = 'flex';
    document.body.style.overflow = 'hidden';
}

function closeLightbox() {
    const modal = document.getElementById('lightboxModal');
    modal.style.display = 'none';
    document.body.style.overflow = 'auto';
}

function nextImage() {
    currentImageIndex = (currentImageIndex + 1) % currentGallery.length;
    updateLightboxImage();
}

function prevImage() {
    currentImageIndex = (currentImageIndex - 1 + currentGallery.length) % currentGallery.length;
    updateLightboxImage();
}

function updateLightboxImage() {
    const lightboxImage = document.getElementById('lightboxImage');
    const lightboxCaption = document.getElementById('lightboxCaption');
    const image = currentGallery[currentImageIndex];

    lightboxImage.src = image.src;
    lightboxImage.alt = image.alt;
    lightboxCaption.textContent = image.title;
}

// Keyboard navigation
function handleKeyPress(e) {
    if (document.getElementById('lightboxModal').style.display === 'flex') {
        switch (e.key) {
            case 'Escape':
                closeLightbox();
                break;
            case 'ArrowRight':
                nextImage();
                break;
            case 'ArrowLeft':
                prevImage();
                break;
        }
    }
}

// Mobile menu toggle
function toggleMobileMenu() {
    const menu = document.getElementById("mobileMenu");
    if (menu) {
        menu.classList.toggle("open");
    }
}

// Initialize
document.addEventListener('DOMContentLoaded', function () {
    renderGallery();

    // Event listeners
    document.querySelector('.close-lightbox').addEventListener('click', closeLightbox);
    document.querySelector('.next-btn').addEventListener('click', nextImage);
    document.querySelector('.prev-btn').addEventListener('click', prevImage);
    document.addEventListener('keydown', handleKeyPress);

    // Close lightbox when clicking outside
    document.getElementById('lightboxModal').addEventListener('click', function (e) {
        if (e.target.id === 'lightboxModal') {
            closeLightbox();
        }
    });
}); 